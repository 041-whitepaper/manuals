<!--
[[Git]]、[[GitHub]]の個人利用方法を説明する
#📃手順書 #🙌自作 
-->
# 概要
この文書はGit及びGitHubの個人利用の方法を説明するものです。
共同作業については知見が貯まり次第後に追記します。

## git及びGitHubの使用目的
個人でのファイル管理においてGit及びGitHubを利用する目的は以下の通りです。
- 高い一覧性
- 低リスクと高い安全性
- 高い情報の再利用性

# 目次
- [概要](#概要)
  - [git及びGitHubの使用目的](#git及びgithubの使用目的)
- [目次](#目次)
- [用語説明](#用語説明)
- [基本動作](#基本動作)
  - [変更を保存する](#変更を保存する)
  - [変更を呼び出す](#変更を呼び出す)
- [作業](#作業)
  - [開始時](#開始時)
  - [普段](#普段)

# 用語説明
※はじめは読み飛ばしていただいて構いません。後にわからない単語が出た時に戻れるようにはじめに配置します。
**下の図(いくつか間違えがあるので脚注をつけました)と照らし合わせながら確認していただくとわかりやすいと思います。**

| 用語               | 属性     | 意味                                                                                                                                     |
| ------------------ | -------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| Git                | システム | バージョン管理システム。ローカルで動く。                                                                                                 |
| GitHub             | サービス | ホスティングサービス。Gitを使って開発されたものをオンライン上に保存し、公開できる。                                                      |
| リポジトリ         | 場所     | 履歴管理を行う場所。Gitが動作する隠しフォルダーのこと。                                                                                  |
| ローカルリポジトリ | 場所     | じぶんのPCにあるリポジトリ。                                                                                                             |
| リモートリポジトリ | 場所     | サーバーにあるリポジトリ。                                                                                                               |
| ワークツリー       | 場所     | 自分のPCの作業場所。ギット管理下にあるあなたのフォルダーのこと。                                                                         |
| ステージ           | 行為     | ワークツリーから変更したファイルをインデックスに登録する。ステージングとも。                                                             |
| インデックス       | 場所     | ローカルリポジトリにワークツリーからコミットする前にファイルを仮置きする場所。                                                           |
| コミット           | 行為     | インデックスに登録されたファイルをローカルリポジトリに反映すること。                                                                     |
| コミットメッセージ | 要素     | コミットの実行時に入力を求められるメッセージのこと。他の人がコミットの変更内容を調べたり、後で自分自身が履歴を見直したりする際に重要。                                                                                                                                         |
| プッシュ           | 行為     | ローカルリポジトリの変更をリモートリポジトリに反映させること。                                                                           |
| フェッチ           | 行為     | リモートリポジトリの変更をローカルリポジトリに反映させること。[^1]                                                                       |
| マージ             | 行為     | ローカルリポジトリの変更をワークツリーに反映させること。[^1]                                                                             |
| プル               | 行為     | フェッチ+マージ。リモートリポジトリをローカルに反映させるときはこれを行う。                                                              |
| ブランチ           | 場所     | ある時点からの別バージョン。並列管理が可能。「ブランチを切る」などという。                                                               |
| ヘッド             | 場所     | 現在作業をしているブランチ。                                                                                                             |
| チェックアウト     | 行為     | ヘッドを切り替えること。他ブランチや過去のコミットにチェックアウトできる。                                                               |
| クローン           | 行為     | リモートリポジトリをローカルに複製する。                                                                                                 |
| フォーク           | 行為     | リモートリポジトリをリモートに複製する。                                                                                                 |
| ssh接続            | 行為     | ローカルからリモートへ接続すること。公開鍵、秘密鍵を用いたセキュアなアクセス。これを用いないとプライベートリポジトリにアクセスできない。 |
| .gitignore         | 設定     | 管理の対象を管理できます。                                                                                                               |
[![Image from Gyazo](https://i.gyazo.com/a9711e79621c8e43217e34218f1e739c.png)](https://gyazo.com/a9711e79621c8e43217e34218f1e739c)[^2][^3]

# 基本動作
Git及びGitHubではファイル変更を管理します。主な管理方法は以下の通りです。

## 変更を保存する
- ワークツリーで作業をする(ファイルに変更を加える)
- ワークツリーから変更をインデックスにステージする
- ステージした変更をローカルリポジトリにコミットする
- コミットした変更をリモートリポジトリにプッシュする
- 変更保存成功！

## 変更を呼び出す
複数人での作業や他デバイスでの作業、過去の作業を呼び出します。
- フェッチをしてリモートリポジトリから変更をローカルリポジトリに呼び出す
- ローカルリポジトリの変更をワークツリーに呼び出す
    - この際、同じ場所を変更してしまった場合に
        - マージ：差分を見て両者の変更を融合させること
        - リベース：ワークツリーの変更を捨ててローカルリポジトリの変更を受け付けること
    - のどちらかを行います。
- 変更呼び出し成功！

# 作業
具体的な作業について説明します。

## 開始時
1. Gitをインストールする
    1. [このページ](https://git-scm.com/book/ja/v2/%E4%BD%BF%E3%81%84%E5%A7%8B%E3%82%81%E3%82%8B-Git%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB)から自分の使うOSに沿ったインストーラーを選択し、インストールを行ってください。
2. Gitに自分のユーザー名とメールアドレスを登録する
    1. ここで登録した内容は、リポジトリに対してコミットした人の情報として履歴などに表示されます。
    2. ユーザー名の登録
        1. git bashを起動します。
            1. アプリケーションとして起動したり
            2. エクスプローラーを右クリックした時にでてくるオプションから起動できます。
        2. `$ git config --global user.name "Your Name"`とコマンドを入れます("Your Name"にはユーザー名を入れてください)。
        3. `$ git config --global user.email "your_email@example.com"`とコマンドを入れます(こちらも自分のメールアドレスを入れてください)。
3. リモートリポジトリをつくる
    1. GitHubにアクセスしてサインアップを行う
        1. 登録するメールアドレスは行う作業によって分かれると思います(学校用、個人用……)。
    2. GitHubにリモートリポジトリを作る
        1. この手順書を読んでるということはgit管理を行いたいプロジェクトがあるということだと思うので、そのプロジェクト環境を構築します。
        2. Create a new repostoryと書いてある場所などからリポジトリを作ります。
        3. 説明文は書かなくてもいいと思います。
        4. パブリック、プライベートがあるので気をつけてください。パブリックは全世界に内容が公開されます。困ったらプライベートがおすすめです。
        5. READMEファイルは作りましょう。なんの作業をする場所か記入します。
        6. .gignoreファイルははじめのうちはいらないと思います。
        7. ライセンスもpublicかつ有用なプログラムを作れたときにのみ意味を成すので無視して結構です。
        8. create repostoryを押します。
        9. リポジトリが完成しました。
4. GitHubでssh接続する
    1. この作業は使用デバイスそれぞれで行う必要があります。
    2. 公開鍵、秘密鍵を作成する
        1. 秘密鍵は自分で保持し、どこかに送信しないようにしましょう。
        2. 鍵を入れるフォルダー( デフォルトでは、各ユーザーの `~/.ssh` ディレクトリ)に移動する
            1. Git bashを起動する
            2. ディレクトリを作成するコマンドを入力
                1. `$mkdir ~/.ssh`
            3. フォルダーに移動するコマンドを入力
                1. `$cd ~/.ssh`
            4. 鍵を生成する
                1. `$ssh-keygen -t rsa`
                2. なにか聞かれたら3回エンターを押してください。
            5. 公開鍵をクリップボードに取得する
                1. windows
                    1. `$ clip < ~/.ssh/id_rsa.pub`
                2. mac
                    1. `$ pbcopy < ~/.ssh/id_rsa.pub`
                3. ※ファイル名を変更した場合はこのコマンドでは動きません
            6. 公開鍵をGitHubにアップする
                1. https://github.com/settings/ssh で公開鍵の設定ができます。
                2. 画面右上の`Add SHH key`をクリック
                3. titleに公開鍵名を入力
                    1. デバイス名とかがおすすめです。
                4. keyに先程(4.2.4.)の公開鍵の中身をコピペ
            7. 接続の確認
                1. Git bashに`$ ssh -T git@github.com`と入力
                2. 本当に接続するのか？と聞かれるのでyesを入力してください。
                    1. Hi (account名)! You've successfully authenticated, but GitHub does not provide shell access.と帰ってきたら完了です。
                3. ここで上手くいかないときは大体、4.2.2.2.で制作したディレクトリ内の鍵のファイル名が違います。
5. ここから分岐します。
    1. 全く新しく作業を始める場合は6.へ
    2. 既に作業を初めてフォルダが有る場合は7.へ
    <!-- 3. ここやばい！全然ダメ。クイックセットアップが出る前提で調整するか、クイックセットアップに頼らない誘導をするかどちらか -->
6. リモートリポジトリをクローンする
    1. ローカルに作業環境を構築する
        1. 作業環境を置く場所を決める
            1. クラウドドライブなどはだめです。
        2. 決めたらそこでgit bashを起動します(エクスプローラー右クリックのコンテキストメニューから)。
            1. どこで実行されているかは黄色文字で場所が表示されるのでそれを確認します。
        3. コマンドを入力します。
              1. `$ git clone "自分のGitHub上のリモートリポジトリurl".git`
              2. リモートリポジトリがローカルリポジトリとワークツリーに複製されます。
        4. うまく動作すれば大丈夫です。
7. すでにある作業フォルダをリモートリポジトリにアップする
    1. 作業環境でgit bashを実行する
        1. エクスプローラーで開き、右クリックのコンテキストメニューから実行します。
            1. どこで実行されているかは黄色文字で場所が表示されるのでそれを確認します。
    2. フォルダーをアップする
    3. コマンドを入力する
          1. `$ git init`
             1. フォルダーをgit環境としてセットアップします。
          2. `$ git remote add origin "自分のgithub上のリモートリポジトリurl".git`
          3. `$ git branch -M main`
          4. `$ git push -u origin main`
   1. うまく動作すれば大丈夫です。
8. 確認する
    1. GitHubのリポジトリページがある
    2. ワークツリーに.gitという隠しフォルダーが入っている
    3. ワークツリーにREADME.mdファイルが作られている
    4. ことを確認してください。
9.  お疲れ様でした！
    1. アンインストール(ローカルの環境を消したい)したいというときは、フォルダーごとデリートしたら大丈夫です。

## 普段
日常的な更新について説明します。
リポジトリを構築したあとの作業は、個人利用において主にリモートリポジトリへのプッシュです。
様々なツールを使ってプッシュを行うことができます。
- コマンド
    - git bash
- GUIツール
    - git gui
    - vscode
    - obsidian git

ここでは一番管理が簡単なvscodeで説明をします。vscodeがインストールされている前提で話を進めます。

1. ワークツリーをvscodeで開く
    1. ワークツリーを開き、右クリックコンテキストメニューから`Code で開く`というものを選択します。
2. 作業をする
    1. この作業はどのツールを用いても勿論構いません(vscode内じゃなくても！)。
    2. 必ず変更は保存してください。ファイルに反映されないとgitは気づいてくれません。
        1. TATEditorとか注意です。
3. 差分があるとvscode左のツールバー、ソース管理にカウントされる
    1. ソース管理(分岐みたいなマークのある所)にカウント通知が表示されます。
4. 差分を確認する
    1. 変更と書いてある場所に差分のあるファイルが表示されます。
    2. クリックすると差分を表示します。
5. ステージする
    1. ファイルをホバーした時に表示される`+`マークからステージを行えます。
    2. コミットしたいファイルを選択します。
        1. フォルダーを選択すると子ファイル全てがステージされます。
6. コミットする
    1. コミットメッセージを書きます
        1. コミットメッセージを記入欄に入力します。
            1. 色々書き方があります。一般的なものは以下の様なものです
                1. 1行目: コミットで変更した内容の要約
                2. 2行目: 空ける
                3. 3行目以降: 変更を実行した理由
                    1. e.g. 
                    2. fix:削除フラグが更新されない不具合の修正
                    3. 
                    4. 新SQLの対象カラムに削除フラグが含まれていなかったため追加しました。
    2. `コミット`ボタンを押してコミットします。
7. プッシュ(sync)する
    1. プッシュはハンバーガーボタンなどから選択できます。
        1. commitをした時にはじめに表示されるのはsyncだと思います。
            1. そのままsyncという選択肢を押すと、プルをしたあとにプッシュが行われます(vscode固有の動作)。
                1.  個人利用の過程ではどちらも動作は変わりません。
8. 完了！お疲れ様です。
    1. 基本的にこの作業を繰り返していくことになると思います。
9. ヒント
    1. vscodeの拡張機能はすごい
        1. gitを管理するための拡張機能が揃っています。有名所はgit historyとかでしょうか。
        2. ググって適宜インストールするといいと思います。
        3. 利便性がかなり上がります。
            1. guiから
                1. タグ付け
                2. ブランチを切る
                3. 確認
                4. チェックアウト
            2. などなどが行えるようになります。
  1. `.gitignore`について
    1.  後々書きます。

以上

<!--
# 覚書
- 用語説明
    - 初めは飛ばしてモロテ
    - リポジトリ
    - プル
    - チェックアウト
        - 昔はプルをチェックインと呼んでいた
- Git及びGitHubの基本構造
    - これからする作業の説明
        - GitHubは何をするところか？
        - Gitは何をするのか？
            - 注意:これまでの様々なサービスと違ってパッケージ化されていないため、コマンドを覚えて利用するか、vscodeやらGitHubGUIとかを用いてGUI化する必要がある。
                - これプログラマは説明なしにやってくるから困る。溝がでかい
- GitHubのアカウント作成
    - どうなメアドが適してるのか
- GitHubのSHH？によるデバイス登録
- GitHubのリポジトリ作成
- 分岐
    - 今ある作業フォルダをGitHub管理下におく場合
    - 新しく作業フォルダを作る場合
- プルプッシュコミットなどの継続的な管理
- 操作説明
    - チェックアウト
- その他
    - Issueやらなんやら
-->

[^1]: フェッチとマージが分かりづらいし理解必要がないので詳しい情報を置いておきます。[【初心者向け】git fetch、git merge、git pullの違いについて - Qiita](https://qiita.com/wann/items/688bc17460a457104d7d)
[^2]: この表ではGitと書いてある部分が間違ってる。そこはリモートサーバーであり、GitHubなどのサービスがある。
[^3]: 表のaddは正しくはステージである。